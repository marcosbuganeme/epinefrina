<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html lang="pt" 
	xmlns:p="http://primefaces.org/ui"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:sec="http://www.springframework.org/security/tags">

	<ui:composition template="/WEB-INF/decorador/layout-autenticado.xhtml">
		<ui:define name="conteudo">
			<sec:authorize ifAllGranted="empresa">
				<div class="agenda">
					<div id="wrapper">
						<ui:include src="/pages/auth/empresa/sidebar.xhtml" />

						<form jsf:id="frm-agendas" prependId="false">
							<p:outputPanel id="agendas">
								<div id="page-content-wrapper">
									<div class="container-fluid">
										<a href="#menu-toggle" id="menu-toggle">
											<img alt="Botão para minimizar a aba de utilidades do sistema" class="logo" jsf:library="img" jsf:name="bt_toggle.png" />
										</a>

										<div class="row hd_agenda">
											<div class="title-ag col-md-6">
												<h2>
													<span>#resson2</span> Título Agenda <em>- Radiografia / Coração</em>
												</h2>
												<h4>
													Subtítulo Agenda
												</h4>
											</div><!-- fim col -->

											<div class="client-ag col-md-3">
												<h3>Clínica São Marcelo</h3>
											</div><!-- fim col -->
		
											<div class="col-md-3">
												<div class="price-ag">
													<p>
														<i aria-hidden="true">R$</i> 89,00
													</p>
												</div>
											</div><!-- fim col -->
										</div> <!-- fim hd agenda -->

										<div class="sub-hd-agenda row">
											<h4>
												<p:commandLink oncomplete="PF('dlgSecretaria').show();"
													update="panel-vincular-secretaria" value="+ Vincular Secretária">
												</p:commandLink>
											</h4>
										</div><!-- fim sub hd agenda -->

										<main class="area-agenda row">
											<p:schedule id="agendas-disponiveis" locale="pt" value="#{scheduleBean.form.model}" widgetVar="schedule">
												<p:ajax event="dateSelect" 
													listener="#{scheduleBean.criarAgenda}" 
													oncomplete="PF('dlgAgenda').show();" 
													update="eventDetails" />
												<p:ajax event="eventSelect" 
													listener="#{scheduleBean.editarAgenda}" 
													oncomplete="PF('dlgAgenda').show();" 
													update="eventDetails" />
											</p:schedule>
										</main><!-- fim area agenda -->
						            </div><!-- container fluid / conteúdo -->		
						        </div><!-- /#page-content-wrapper -->
					        </p:outputPanel>
						</form>
					</div>
				</div>

				<p:outputPanel id="panel-agenda">
					<p:dialog widgetVar="dlgAgenda" header="Criar agenda" showEffect="clip" hideEffect="clip">
						<form jsf:id="frm-agenda" prependId="false">
							<h:panelGrid id="eventDetails" columns="2">
								<p:outputLabel for="titulo" value="Título:" />
								<p:inputText id="titulo" value="#{scheduleBean.form.event.title}" required="true" />

								<p:outputLabel for="dia" value="Dia:" />
								<p:calendar id="dia" value="#{scheduleBean.form.event.data}" locale="pt_BR" pattern="dd/MM/yyyy" />

								<p:outputLabel for="de" value="De:" />
								<p:calendar id="de" value="#{scheduleBean.form.event.startDate}" locale="pt_BR" pattern="HH:mm" timeOnly="true" />

								<p:outputLabel for="ate" value="Até:" />
								<p:calendar id="ate" value="#{scheduleBean.form.event.endDate}" locale="pt_BR" pattern="HH:mm" timeOnly="true" />

								<p:outputLabel for="dia-todo" value="Dia todo:" />
								<h:selectBooleanCheckbox id="dia-todo" value="#{scheduleBean.form.event.allDay}" />

								<p:commandButton type="reset" value="Limpar" />
								<p:commandButton actionListener="#{scheduleBean.addEvent}" id="btnSalvar"  
									oncomplete="PF('schedule').update();PF('dlgAgenda').hide();" 
									update="agendas" value="Salvar agenda" />
							</h:panelGrid>
						</form>
					</p:dialog>
				</p:outputPanel>

				<p:outputPanel id="panel-vincular-secretaria">
					<form jsf:id="frm-vincular-secretaria" prependId="false">
						<p:dialog id="dlg-secretaria" draggable="false"
							header="Secretárias disponíveis" modal="true" widgetVar="dlgSecretaria"
							resizable="false" responsive="true">
							Tabela de dados com filtro de pesquisa
						</p:dialog>
					</form>
				</p:outputPanel>
			</sec:authorize>
		</ui:define>

		<ui:define name="personalizar-script">
			<script jsf:library="js" jsf:name="schedule-primefaces.js" />
		</ui:define>
	</ui:composition>
</html>