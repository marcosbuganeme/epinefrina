<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html 
	lang="pt" 
	xmlns:p="http://primefaces.org/ui"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

	<head jsf:id="head">
		<title>Encaixe-me</title>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link jsf:library="css" jsf:name="bootstrap.min.css" type="text/css" />

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	    <![endif]-->

		<link jsf:library="webjars" jsf:name="font-awesome/4.6.3/css/font-awesome-jsf.css" type="text/css" />
		<link jsf:library="css" jsf:name="padrao/style.css" rel="stylesheet" type="text/css" />
		<link jsf:library="css" jsf:name="normalize.css" rel="stylesheet" type="text/css" />
	</head>

	<body jsf:id="body">
		<p:ajaxStatus id="status"
			onstart="PF('statusDialog').show()" 
			onsuccess="PF('statusDialog').hide()" />

 		<p:dialog
 			widgetVar="statusDialog" 
 			modal="true" 
 			draggable="false" 
 			closable="false" 
 			resizable="false" 
 			showHeader="false">
		        <h:graphicImage 
		        	library="img" 
		        	name="loading128x128.gif" />
		</p:dialog>

		<div class="container-fluid">
			<ui:include src="/WEB-INF/decorador/cabecalho.xhtml" />
		</div>

		<h:form class="frm-preparar" id="frm-botoes-cadastro" prependId="false">
			<div class="row text-center">
				<div class="col-md-12">
					<h:commandLink id="btn-show-assistido" ajax="true">
						<img data-toggle="tooltip" data-placement="bottom" 
							jsf:library="img" jsf:name="cad-assistido.png" 
							title="Clique para abrir o cadastro de paciente" />
						<p:ajax update="otp-validar-dados" />
					</h:commandLink>

					<h:commandLink id="btn-show-empresa" ajax="true">
						<img data-toggle="tooltip" data-placement="right"
							jsf:library="img" jsf:name="cad-empresa.png"
							title="Clique para abrir o cadastro de empresa" />
						<p:ajax update="otp-validar-dados" />
					</h:commandLink>
				</div>
			</div>
		</h:form>

		<p:outputPanel id="otp-validar-dados">
			<main class="row">
				<h:form class="form-perfil" 
					id="frm-assistido" prependId="false">
					<div class="box-perfil">
						<div class="title-perfil">
							<h2>Paciente</h2>
							<p>Itens com asterístico(*) são obrigatórios.</p>
						</div>

						<div class="box-estab row">
							<h3>Dados pessoais</h3>

							<div class="col-md-12">
								<h:inputText pt:autofocus="autofocus" 
									id="email-assistido" 
									name="email-assistido" 
									pt:placeholder="E-mail de cadastro" 
									pt:type="text" /> 
							</div>

							<div class="col-md-12">
								<input id="cpf" class="cpf" 
									name="cpf" 
									placeholder="Número do cpf [ xxx.xxx.xxx-xx ]" 
									type="text" />
							</div>

							<div class="col-md-12">
								<h:commandLink id="btn-valida-dados-assistido"
									styleClass="btn btn-block btn-lg btn-success" 
									value="Validar dados">
									<p:ajax update="status opt-mudar-senha" />
								</h:commandLink>
							</div>
						</div><!-- box-estab row -->
					</div><!-- box-perfil -->
				</h:form>
			</main>

			<main class="row" 
				jsf:rendered="#{esqueciSenhaBean.form.mostraPainelValidacaoEmpresa}">
				<h:form class="form-perfil" 
					id="frm-empresa" prependId="false">
					<div class="box-perfil">
						<div class="title-perfil">
							<h2>Empresa</h2>
							<p>Itens com asterístico(*) são obrigatórios.</p>
						</div>

						<div class="box-estab row">
							<h3>Dados pessoais</h3>

							<div class="col-md-12">
								<h:inputText pt:autofocus="autofocus" 
									id="email-empresa" 
									value="#{esqueciSenhaBean.email}" 
									name="email-empresa" 
									pt:placeholder="E-mail [ exemplo@epinefrina.com ]" 
									pt:type="email" />
							</div>

							<div class="col-md-12">
								<input id="cnpj" class="cnpj" 
									jsf:value="#{esqueciSenhaBean.login}" 
									name="cnpj" 
									placeholder="Número do cnpj [ xx.xxx.xxx/xxxx-xx ]" 
									type="text" />
							</div>

							<div class="col-md-12">
								<h:commandLink id="btn-valida-dados-empresa"
									actionListener="#{esqueciSenhaBean.validaDados()}" 
									styleClass="btn btn-block btn-lg btn-success"
									value="Validar dados">
									<p:ajax update="status opt-mudar-senha" />
								</h:commandLink>
							</div>
						</div><!-- box-estab row -->
					</div><!-- box-perfil -->
				</h:form>
			</main>
			
			<p:outputPanel id="opt-mudar-senha">
				<main class="row"
					jsf:rendered="#{esqueciSenhaBean.form.mostraPainelSenha}">
					<form class="form-perfil" jsf:id="frm-mudar-senha" prependId="false">
						<div class="box-perfil">
							<div class="title-perfil">
								<h2>Mudar senha</h2>
								<p>Itens com asterístico(*) são obrigatórios.</p>
							</div>

							<div class="box-estab row">
								<h3>Dados pessoais</h3>

								<div class="col-md-12">
									<h:inputText pt:autofocus="autofocus" 
										id="senha" 
										value="#{esqueciSenhaBean.form.senha}" 
										name="senha" 
										pt:placeholder="Senha" 
										pt:type="password" />
								</div>

								<div class="col-md-12">
									<input id="confirmar-senha" 
										value="#{esqueciSenhaBean.form.confirmaSenha}" 
										name="confirmar" 
										pt:placeholder="Confirma senha" 
										pt:type="password" />
								</div>
							</div><!-- box-estab row -->
						</div><!-- box-perfil -->
					</form>
				</main>
			</p:outputPanel>
		</p:outputPanel>

		<h:outputScript library="primefaces" name="jquery/jquery.js" />
		<script jsf:library="js" jsf:name="bootstrap.min.js" type="text/javascript" />
		<script src="https://rawgit.com/RobinHerbots/jquery.inputmask/3.x/dist/jquery.inputmask.bundle.js"></script>
		<script jsf:library="js" jsf:name="comum.js" type="text/javascript" />
	</body>
</html>